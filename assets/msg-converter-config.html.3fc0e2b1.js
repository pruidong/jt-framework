import{r as p,o as c,c as u,a as n,b as a,w as e,F as l,e as s,d as i}from"./app.2cf53764.js";import{_ as r}from"./plugin-vue_export-helper.21dcd24c.js";const k={},d=n("h1",{id:"\u6D88\u606F\u8F6C\u6362\u5668",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6D88\u606F\u8F6C\u6362\u5668","aria-hidden":"true"},"#"),s(" \u6D88\u606F\u8F6C\u6362\u5668")],-1),m=n("p",null,[n("code",null,"RequestMsgBodyConverter"),s(" \u8D1F\u8D23\u5C06\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4E2D\u7684 "),n("code",null,"byte[]"),s(" \u8F6C\u6362\u4E3A "),n("code",null,"\u8BF7\u6C42\u6D88\u606F\u4F53\u5B9E\u4F53\u7C7B"),s(" \u4EE5\u65B9\u4FBF\u4F7F\u7528\u3002")],-1),b=n("h2",{id:"\u624B\u52A8\u5B9E\u73B0\u5E76\u6CE8\u518C",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u624B\u52A8\u5B9E\u73B0\u5E76\u6CE8\u518C","aria-hidden":"true"},"#"),s(" \u624B\u52A8\u5B9E\u73B0\u5E76\u6CE8\u518C")],-1),_={class:"custom-container danger"},g=n("p",{class:"custom-container-title"},"RequestMsgBodyConverter",-1),y=n("li",null,[s("\u81EA\u5B9A\u4E49\u7684\u6D88\u606F\u4F53\u89E3\u6790\u5668 "),n("code",null,"\u5FC5\u987B"),s(" \u5B9E\u73B0 "),n("code",null,"RequestMsgBodyConverter"),s(" \u8FD9\u4E2A\u6CDB\u578B\u63A5\u53E3")],-1),h=s("\u5F53\u7136\uFF0C\u8FD9\u79CD\u5B9E\u73B0\u63A5\u53E3\u5E76\u624B\u52A8\u6CE8\u518C\u7684\u65B9\u5F0F\u663E\u5F97\u975E\u5E38\u7E41\u7410\uFF0C\u4F60\u5B8C\u5168\u53EF\u4EE5 "),v=s("\u53C2\u8003\u8FD9\u91CC"),f=s(" \u4F7F\u7528 "),B=n("code",null,"\u57FA\u4E8E\u6CE8\u89E3",-1),M=s(" \u7684\u65B9\u5F0F\u6765\u5B9E\u73B0 "),C=n("code",null,"RequestMsgBodyConverter",-1),w=s(" \u7684\u529F\u80FD\u3002"),j=i(`<ul><li>\u4EE5\u4E0B\u4E3A\u793A\u4F8B\u6027\u7684\u89E3\u6790\u4F4D\u7F6E\u6D88\u606F\u7684 <code>RequestMsgBodyConverter</code></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocationUploadMsgBodyConverter2</span> <span class="token keyword">implements</span> <span class="token class-name">RequestMsgBodyConverter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LocationUploadMsgBody</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LocationUploadMsgBody</span><span class="token punctuation">&gt;</span></span> <span class="token function">convert2Entity</span><span class="token punctuation">(</span><span class="token class-name">RequestMsgMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> metadata<span class="token punctuation">.</span><span class="token function">getBodyBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LocationUploadMsgBody</span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LocationUploadMsgBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setWarningFlag</span><span class="token punctuation">(</span><span class="token function">intFromBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token function">intFromBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setLat</span><span class="token punctuation">(</span><span class="token function">intFromBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">100_0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setLng</span><span class="token punctuation">(</span><span class="token function">intFromBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">100_0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span> <span class="token function">intFromBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setSpeed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span> <span class="token function">intFromBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setDirection</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span> <span class="token function">intFromBytes</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token class-name">BcdOps</span><span class="token punctuation">.</span><span class="token function">bytes2BcdString</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>\u6CE8\u518C\u81EA\u5B9A\u4E49 <code>RequestMsgBodyConverter</code></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Jt808Config</span> <span class="token keyword">extends</span> <span class="token class-name">Jt808ServerConfigurationSupport</span> <span class="token punctuation">{</span> 
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureMsgConverterMapping</span><span class="token punctuation">(</span><span class="token class-name">MsgConverterMapping</span> mapping<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">configureMsgConverterMapping</span><span class="token punctuation">(</span>mapping<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u624B\u52A8\u5C06\u81EA\u5B9A\u4E49\u5904\u7406\u5668\u6CE8\u518C\u5230 MsgConverterMapping</span>
        mapping<span class="token punctuation">.</span><span class="token function">registerConverter</span><span class="token punctuation">(</span><span class="token class-name">Jt808MsgType</span><span class="token punctuation">.</span>CLIENT_LOCATION_INFO_UPLOAD<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LocationUploadMsgBodyConverter2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="\u57FA\u4E8E\u6CE8\u89E3\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8E\u6CE8\u89E3\u5B9E\u73B0" aria-hidden="true">#</a> \u57FA\u4E8E\u6CE8\u89E3\u5B9E\u73B0</h2>`,5),x={class:"custom-container tip"},L=n("p",{class:"custom-container-title"},"\u4F20\u9001\u95E8",-1),q=s("\u57FA\u4E8E\u6CE8\u89E3\u6765\u5B9E\u73B0 "),F=n("code",null,"RequestMsgBodyConverter",-1),R=s(" \u7684\u529F\u80FD "),O=s("\u8BF7\u79FB\u6B65\u8FD9\u91CC"),N=n("hr",null,null,-1),U={class:"custom-container tip"},S=n("p",{class:"custom-container-title"},"\u4F20\u9001\u95E8",-1),E=s("\u672C\u5C0F\u8282\u7684\u793A\u4F8B\u53EF\u4EE5\u5728 "),I={href:"https://github.com/hylexus/jt-framework/tree/master/samples/jt-808-server-sample-customized",target:"_blank",rel:"noopener noreferrer"},T=s("samples/jt-808-server-sample-customized"),z=s(" \u4E0B\u627E\u5230\u5BF9\u5E94\u4EE3\u7801\u3002");function V(J,A){const t=p("RouterLink"),o=p("ExternalLinkIcon");return c(),u(l,null,[d,m,b,n("div",_,[g,n("ul",null,[y,n("li",null,[h,a(t,{to:"/v1/jt-808/guide/customization/docs/v1/jt-808/guide/annotation-based-dev/req-msg-mapping.html"},{default:e(()=>[v]),_:1}),f,B,M,C,w])])]),j,n("div",x,[L,n("p",null,[q,F,R,a(t,{to:"/v1/jt-808/guide/customization/docs/v1/jt-808/guide/annotation-based-dev/req-msg-mapping.html"},{default:e(()=>[O]),_:1})])]),N,n("div",U,[S,n("p",null,[E,n("a",I,[T,a(o)]),z])])],64)}var P=r(k,[["render",V]]);export{P as default};
